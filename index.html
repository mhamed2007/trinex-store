<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TRINEX | Official Store</title>

    <!-- ==== SEO & Social (Ù…Ù‡Ù… Ù„Ø¸Ù‡ÙˆØ± Ø£ÙØ¶Ù„ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙƒØ©) ==== -->
    <meta name="description" content="TRINEX - Ù…ØªØ¬Ø± Ø³ØªØ±ÙŠØª ÙˆÙŠØ± Ù…ØµØ±ÙŠ. ØªØ´ÙƒÙŠÙ„Ø© Ù‡ÙˆØ¯ÙŠØ²ØŒ ØªÙŠØ´ÙŠØ±ØªØ§Øª ÙˆØ¨Ø³ØªØ±Ø§Øª Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©. Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† Ø¹Ø¨Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£Ùˆ ÙˆØ§ØªØ³Ø§Ø¨." />
    <meta name="keywords" content="TRINEX, Ø³ØªØ±ÙŠØª ÙˆÙŠØ±, Ù‡ÙˆØ¯ÙŠØ², ØªÙŠØ´ÙŠØ±ØªØ§Øª, Ù…ØªØ¬Ø±, Ù…ØµØ±, Cairo" />
    <meta name="author" content="TRINEX" />
    <!-- Open Graph -->
    <meta property="og:title" content="TRINEX | Official Store" />
    <meta property="og:description" content="Ù…ØªØ¬Ø± Ø³ØªØ±ÙŠØª ÙˆÙŠØ± Ù…ØµØ±ÙŠ â€” Ø¬ÙˆØ¯Ø©ØŒ Ù‡ÙˆÙŠØ©ØŒ ÙˆÙ…Ø³ØªÙ‚Ø¨Ù„." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="hode1.jpg" />
    <meta property="og:url" content="https://trinex-store.vercel.app/" />
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />

    <!-- Preconnect for fonts (Ø£Ø¯Ø§Ø¡ Ø£Ø³Ø±Ø¹) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="" crossorigin="anonymous">

    <!-- Basic CSP meta (Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ø£ÙØ¶Ù„ ØªØ¹ÙŠÙŠÙ† CSP Ø¹Ø¨Ø± Ø±Ø¤ÙˆØ³ Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„Ø®Ø·Ø© Ø£Ù…Ø§Ù† Ø£ÙØ¶Ù„) -->
    <!--
      Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ù…Ù†ÙŠØ© Ù…Ù‡Ù…Ø©:
      - meta CSP Ø£Ù‚Ù„ Ù‚ÙˆØ© Ù…Ù† Header CSP ÙˆÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ø®ØªØ±Ù‚Ù‹Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø¯ÙˆØ§Øª.
      - Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø£Ù…Ø§Ù†Ù‹Ø§ Ø­Ù‚ÙŠÙ‚ÙŠÙ‹Ø§: Ø¶Ø¹ CSP ÙƒÙ€ HTTP header Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Vercel / Server.
      Ø§Ù„Ù…Ø«Ø§Ù„ Ø£Ø¯Ù†Ø§Ù‡ ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙˆÙŠÙØ¨Ù‚ÙŠ inline scripts (unsafe-inline) Ù…Ø¤Ù‚ØªØ§Ù‹ Ù„Ø£Ù† Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø©.
      Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø£Ù…Ø§Ù†: Ø§Ù†Ù‚Ù„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø¥Ù„Ù‰ Ù…Ù„Ù Ø®Ø§Ø±Ø¬ÙŠ ÙˆØ¹ÙŠÙ‘Ù† nonce Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… header CSP Ø¨Ø¯ÙˆÙ† unsafe-inline.
    -->
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self' https:; connect-src 'self' https://www.googleapis.com https://firebasestorage.googleapis.com https://firestore.googleapis.com https://www.gstatic.com https://wa.me; img-src 'self' data: https:; font-src https://fonts.gstatic.com https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline' https://www.gstatic.com https://cdnjs.cloudflare.com https://www.googleapis.com;">

    <link rel="icon" type="image/png" href="favicon.png" />

    <style>
        /* ========== VARIABLES ========== */
        :root {
            --bg: #000;
            --panel: #0a0a0a;
            --green: #00e676;
            --text: #fff;
            --border: #333;
            --error: #ff3333;
            --muted: #888;
        }

        /* ========== GLOBAL ========== */
        html, body { height: 100%; }
        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            padding-top: 80px; /* space for fixed navbar */
            background-image: linear-gradient(#111 1px, transparent 1px), linear-gradient(90deg, #111 1px, transparent 1px);
            background-size: 30px 30px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }
        a { color: inherit; text-decoration: none; }

        /* ========== NAVBAR ========== */
        nav {
            background: rgba(0,0,0,0.95);
            border-bottom: 1px solid #222;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            transition: transform 0.3s ease-in-out, background 0.2s;
            box-sizing: border-box;
        }
        .nav-hidden { transform: translateY(-100%); }
        .brand-text { font-family: 'Montserrat'; font-size: 1.8rem; font-weight: 900; color: #fff; cursor: pointer; letter-spacing: 2px; }
        .nav-links { display: flex; gap: 20px; align-items:center; }
        .nav-links a { color: #ccc; font-weight: 600; transition: 0.2s; font-size: 0.95rem; }
        .nav-links a:hover, .nav-links a.active { color: #fff; border-bottom: 2px solid var(--green); padding-bottom:4px; }
        .nav-icons { display:flex; gap:15px; align-items:center; }
        .nav-icons i { color:#fff; font-size:1.1rem; cursor:pointer; transition:0.2s; }
        .nav-icons i:hover { color: var(--green); }
        .user-area { display:flex; align-items:center; gap:8px; }
        .login-btn { background: var(--green); color: #000; padding: 6px 15px; border-radius: 20px; font-weight: bold; font-size:0.85rem; cursor:pointer; }
        .user-profile { display:none; align-items:center; gap:8px; cursor:pointer; border:1px solid #333; padding:5px 10px; border-radius:20px; }
        .user-profile i { font-size:1.2rem; color:var(--green); }

        /* ========== SECTIONS ========== */
        section { display: none; padding: 20px; animation: fadeIn 0.35s ease-in-out; min-height: 60vh; }
        section.active { display: block; }
        @keyframes fadeIn { from { opacity:0; transform: translateY(8px); } to { opacity:1; transform: translateY(0); } }

        /* ========== HOME GRID ========== */
        .container { display:flex; flex-wrap:wrap; justify-content:center; gap:30px; max-width:1200px; margin:0 auto; }
        .card { background: var(--panel); border:1px solid var(--border); width:300px; border-radius:10px; overflow:hidden; transition:0.35s; position:relative; box-sizing:border-box; }
        .card:hover { transform: translateY(-6px); border-color:#555; }
        .img-area { display:block; width:100%; height:320px; overflow:hidden; background:#111; cursor:pointer; }
        .img-area img { width:100%; height:100%; object-fit:cover; filter:grayscale(100%); transition:0.45s transform,0.45s filter; display:block; }
        .card:hover img { filter:grayscale(0%); transform:scale(1.05); }
        .card-actions { display:flex; justify-content:space-between; padding:10px 15px; background:#111; border-bottom:1px solid #222; }
        .action-btn { background:none; border:none; color:#666; cursor:pointer; font-size:1.2rem; transition:0.25s; }
        .action-btn:hover { color:#fff; transform:scale(1.15); }
        .action-btn.liked { color:#ff0050; } .action-btn.saved { color:#FFD700; }
        .info { padding:15px; text-align:right; }
        .info h3 { font-family:'Montserrat'; font-size:1.1rem; margin:0; color:#fff; text-transform:uppercase; }
        .price { display:block; margin-top:5px; color:#aaa; font-weight:bold; font-family:'Montserrat'; }
        .buy-btn { display:block; width:100%; padding:10px 0; margin-top:15px; background:transparent; border:1px solid #fff; color:#fff; font-weight:900; border-radius:5px; cursor:pointer; font-family:'Montserrat'; transition:0.25s; }
        .buy-btn:hover { background:#fff; color:#000; }

        /* ========== PRODUCT VIEW ========== */
        .product-view { max-width:1100px; margin:0 auto; display:flex; flex-wrap:wrap; gap:40px; padding:20px; box-sizing:border-box; }
        .view-gallery { flex:1; min-width:300px; }
        .view-img { width:100%; border-radius:10px; border:1px solid #333; display:block; }
        .view-details { flex:1; min-width:300px; text-align:right; }
        .view-details h1 { font-family:'Montserrat'; font-size:2.2rem; text-transform:uppercase; margin:0; }
        .view-price { font-size:1.8rem; color:#ccc; font-family:'Montserrat'; font-weight:bold; margin:10px 0 20px; display:block; }
        .p-label { display:block; margin-top:15px; color:var(--muted); font-weight:bold; font-size:0.9rem; }
        .colors { display:flex; gap:10px; margin-top:10px; }
        .color-dot { width:35px; height:35px; border-radius:50%; cursor:pointer; border:2px solid #333; transition:0.2s; }
        .color-dot:hover { transform:scale(1.08); }
        .color-dot.active { border-color:#fff; box-shadow:0 0 10px #fff; transform:scale(1.08); }
        select, input[type=number] { background:#111; color:#fff; border:1px solid #333; padding:12px; width:100%; box-sizing:border-box; border-radius:5px; margin-top:5px; font-family:'Montserrat'; font-size:1rem; }
        .review-btn { background-color:var(--green); color:#000; border:none; padding:15px; width:100%; font-weight:bold; cursor:pointer; margin-top:30px; border-radius:5px; font-size:1.1rem; transition:0.25s; }
        .review-btn:hover { background-color:#fff; }
        #review-panel { display:none; background:#151515; padding:20px; border:1px solid #333; border-radius:10px; margin-top:20px; border-right:4px solid var(--green); }
        .confirm-cart-btn { width:100%; padding:12px; background:#fff; color:#000; border:none; font-weight:bold; border-radius:5px; margin-top:15px; cursor:pointer; transition:0.25s; }
        .confirm-cart-btn:hover { background:#ccc; }

        /* ========== FORMS & CART ========== */
        .form-container { max-width:500px; margin:20px auto; background:var(--panel); padding:30px; border-radius:10px; border:1px solid var(--border); box-shadow:0 0 20px rgba(0,0,0,0.5); }
        .form-group { margin-bottom:15px; text-align:right; }
        .form-group input, .form-group textarea { width:100%; padding:12px; background:#000; border:1px solid #333; color:#fff; border-radius:5px; box-sizing:border-box; font-family:'Cairo'; }
        .submit-btn { width:100%; padding:15px; background:var(--green); color:#000; border:none; font-weight:bold; border-radius:5px; cursor:pointer; margin-top:10px; font-size:1.1rem; transition:0.25s; }
        .submit-btn:hover { background:#fff; }
        .submit-btn:disabled { background:#333; color:#666; cursor:not-allowed; }

        .cart-item { display:flex; align-items:center; background:var(--panel); padding:15px; margin-bottom:10px; border-radius:10px; border:1px solid var(--border); position:relative; }
        .cart-item img { width:70px; height:70px; border-radius:5px; margin-left:15px; object-fit:cover; }
        .remove-btn { color:var(--error); background:none; border:none; cursor:pointer; font-size:1.2rem; margin-right:auto; }
        .cart-total { text-align:center; margin-top:20px; border-top:1px solid #333; padding-top:20px; }

        /* ========== FOOTER ========== */
        footer { background:var(--panel); padding:40px 20px; text-align:center; border-top:1px solid #222; margin-top:auto; }
        .social-icons a { color:#888; font-size:1.5rem; margin:0 10px; transition:0.3s; width:45px; height:45px; border-radius:50%; border:1px solid #333; display:inline-flex; align-items:center; justify-content:center; text-decoration:none; }
        .social-icons a:hover { color:#fff; border-color:transparent; transform:translateY(-3px); }
        .whatsapp-float { position:fixed; bottom:25px; right:25px; background:#25d366; color:#FFF; border-radius:50px; width:60px; height:60px; display:flex; align-items:center; justify-content:center; font-size:30px; z-index:1000; text-decoration:none; box-shadow:0 5px 15px rgba(0,0,0,0.3); transition:0.3s; }
        .whatsapp-float:hover { transform:scale(1.07); background:#1ebd56; }

        /* ========== ACCESSIBILITY & FOCUS ========== */
        :focus { outline: 3px solid rgba(0,230,118,0.25); outline-offset: 2px; }
        button, input, select { font-family: 'Cairo', sans-serif; }
        .sr-only { position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }

        /* ========== MOBILE ========== */
        @media (max-width:768px) {
            nav { padding: 15px; }
            .nav-links { display:none; }
            .container { width:95%; }
        }
    </style>
</head>
<body>

    <!-- Accessible skip link -->
    <a class="sr-only" href="#main-content">ØªØ®Ø·ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a>

    <nav id="navbar" role="navigation" aria-label="Main navigation">
        <a onclick="showSection('home')" class="brand-text" aria-label="TRINEX home">TRINEX</a>
        <div class="nav-links" role="menu" aria-hidden="false">
            <a onclick="showSection('home')" class="active" role="menuitem">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a onclick="showSection('winter')" role="menuitem">Ø´ØªÙˆÙŠ</a>
            <a onclick="showSection('summer')" role="menuitem">ØµÙŠÙÙŠ</a>
            <a onclick="showSection('sweatpants')" role="menuitem">Ø³ÙˆÙŠØª Ø¨Ø§Ù†ØªØ³</a>
            <a onclick="showSection('about')" role="menuitem">Ù…Ù† Ù†Ø­Ù†</a>
        </div>
        <div class="nav-icons" aria-hidden="false">
            <i class="fas fa-search" role="button" aria-label="Ø¨Ø­Ø«"></i>
            <a onclick="showSection('cart')" style="color:#fff;" aria-label="Ø§Ù„Ø³Ù„Ø©"><i class="fas fa-shopping-bag"></i></a>
            <div class="user-area" aria-live="polite">
                <span id="loginBtn" class="login-btn" onclick="showSection('login')" role="button" tabindex="0">Ø¯Ø®ÙˆÙ„</span>
                <div id="userProfile" class="user-profile" onclick="showSection('profile')" role="button" aria-hidden="true">
                    <span id="userNameTxt" style="font-size:0.8rem; font-family:'Cairo';">Ø§Ù„Ø¹Ù…ÙŠÙ„</span>
                    <i class="fas fa-user-circle" aria-hidden="true"></i>
                </div>
            </div>
        </div>
    </nav>

    <main id="main-content" role="main">
        <!-- HOME -->
        <section id="home" class="active" aria-labelledby="home-heading">
            <h2 id="home-heading" class="sr-only">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
            <div class="container" id="productGrid">
                <!-- Cards generated statically here for speed and SEO; images have alt and lazy loading -->
                <div class="card" data-id="p1" aria-label="Black Hoodie V1">
                    <div class="img-area" onclick="openProduct('p1')" role="button" tabindex="0">
                        <img src="hode1.jpg" loading="lazy" alt="Black Hoodie V1 - TRINEX" width="600" height="640">
                    </div>
                    <div class="card-actions">
                        <button class="action-btn" onclick="toggleAction(this, 'like')" aria-label="Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©"><i class="far fa-heart"></i></button>
                        <button class="action-btn" onclick="toggleAction(this, 'save')" aria-label="Ø­ÙØ¸"><i class="far fa-bookmark"></i></button>
                    </div>
                    <div class="info">
                        <h3>Black Hoodie V1</h3>
                        <span class="price">650 EGP</span>
                        <button class="buy-btn" onclick="openProduct('p1')" aria-label="Ø´Ø±Ø§Ø¡ Black Hoodie V1">BUY NOW</button>
                    </div>
                </div>

                <div class="card" data-id="p2" aria-label="Oversized Tee">
                    <div class="img-area" onclick="openProduct('p2')" role="button" tabindex="0">
                        <img src="hode2.jpg" loading="lazy" alt="Oversized Tee - TRINEX" width="600" height="640">
                    </div>
                    <div class="card-actions">
                        <button class="action-btn" onclick="toggleAction(this, 'like')" aria-label="Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©"><i class="far fa-heart"></i></button>
                        <button class="action-btn" onclick="toggleAction(this, 'save')" aria-label="Ø­ÙØ¸"><i class="far fa-bookmark"></i></button>
                    </div>
                    <div class="info">
                        <h3>Oversized Tee</h3>
                        <span class="price">400 EGP</span>
                        <button class="buy-btn" onclick="openProduct('p2')" aria-label="Ø´Ø±Ø§Ø¡ Oversized Tee">BUY NOW</button>
                    </div>
                </div>

                <div class="card" data-id="p3" aria-label="Tactical Vest">
                    <div class="img-area" onclick="openProduct('p3')" role="button" tabindex="0">
                        <img src="hode3.jpg" loading="lazy" alt="Tactical Vest - TRINEX" width="600" height="640">
                    </div>
                    <div class="card-actions">
                        <button class="action-btn" onclick="toggleAction(this, 'like')" aria-label="Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©"><i class="far fa-heart"></i></button>
                        <button class="action-btn" onclick="toggleAction(this, 'save')" aria-label="Ø­ÙØ¸"><i class="far fa-bookmark"></i></button>
                    </div>
                    <div class="info">
                        <h3>Tactical Vest</h3>
                        <span class="price">850 EGP</span>
                        <button class="buy-btn" onclick="openProduct('p3')" aria-label="Ø´Ø±Ø§Ø¡ Tactical Vest">BUY NOW</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- PRODUCT VIEW -->
        <section id="product-view" aria-labelledby="product-view-heading">
            <div class="product-view">
                <div class="view-gallery">
                    <img id="p_img" src="" class="view-img" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬">
                </div>
                <div class="view-details">
                    <h1 id="p_title">...</h1>
                    <span id="p_price" class="view-price">0 EGP</span>

                    <p class="p-label">Ø§Ù„Ù„ÙˆÙ†:</p>
                    <div id="p_colors" class="colors" role="list"></div>
                    <p id="color-txt" style="color:#aaa; font-size:0.95rem;">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</p>

                    <p class="p-label">Ø§Ù„Ù…Ù‚Ø§Ø³:</p>
                    <select id="p_size" aria-label="Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù‚Ø§Ø³"></select>

                    <p class="p-label">Ø§Ù„ÙƒÙ…ÙŠØ©:</p>
                    <input type="number" id="p_qty" value="1" min="1" aria-label="ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬">

                    <button class="review-btn" onclick="openReview()" aria-label="Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨</button>

                    <div id="review-panel">
                        <h3 style="margin-top:0; color:#fff;">Ù…Ù„Ø®Øµ</h3>
                        <p style="color:#ccc;">Ø§Ù„Ù„ÙˆÙ†: <span id="rev-color"></span> | Ø§Ù„Ù…Ù‚Ø§Ø³: <span id="rev-size"></span> | Ø§Ù„Ø¹Ø¯Ø¯: <span id="rev-qty"></span></p>
                        <button class="confirm-cart-btn" onclick="confirmAddToCart()" aria-label="Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© ğŸ›’</button>
                    </div>
                    <button onclick="showSection('home')" style="background:none; border:none; color:var(--muted); margin-top:20px; cursor:pointer;">Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ³ÙˆÙ‚</button>
                </div>
            </div>
        </section>

        <!-- CART -->
        <section id="cart" aria-labelledby="cart-heading">
            <div class="form-container" style="max-width:800px;">
                <h1 id="cart-heading" style="text-align:center; color:var(--green); font-family:'Montserrat';">MY CART ğŸ›’</h1>
                <div id="cartItems" aria-live="polite"></div>
                <div id="cartSummary" class="cart-total" style="display:none;">
                    <h3>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="cartTotal">0</span> EGP</h3>
                    <button onclick="showSection('checkout')" class="submit-btn" aria-label="Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡ âœ…</button>
                </div>
            </div>
        </section>

        <!-- CHECKOUT -->
        <section id="checkout" aria-labelledby="checkout-heading">
            <div class="form-container">
                <h1 id="checkout-heading" style="text-align:center; color:var(--green); font-family:'Montserrat';">CHECKOUT</h1>
                <div id="autoFillMsg" style="background:rgba(0,230,118,0.1); color:var(--green); padding:10px; border-radius:5px; text-align:center; display:none; margin-bottom:20px;">âœ¨ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø¬Ø§Ù‡Ø²Ø©</div>
                <form onsubmit="sendOrder(event)">
                    <div class="form-group"><input type="text" id="co_name" placeholder="Ø§Ù„Ø§Ø³Ù…" required aria-label="Ø§Ù„Ø§Ø³Ù…"></div>
                    <div class="form-group"><input type="tel" id="co_phone" placeholder="Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" required aria-label="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„"></div>
                    <div class="form-group"><input type="tel" id="co_phone2" placeholder="Ø±Ù‚Ù… Ø§Ø­ØªÙŠØ§Ø·ÙŠ" aria-label="Ø±Ù‚Ù… Ø§Ø­ØªÙŠØ§Ø·ÙŠ"></div>
                    <div class="form-group"><textarea id="co_address" rows="3" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" required aria-label="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"></textarea></div>
                    <button type="submit" class="submit-btn" aria-label="ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§ØªØ³Ø§Ø¨">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ (ÙˆØ§ØªØ³Ø§Ø¨) <i class="fab fa-whatsapp"></i></button>
                    <p style="text-align:center; margin-top:15px;"><a onclick="showSection('cart')" style="color:var(--muted); cursor:pointer;">Ø¥Ù„ØºØ§Ø¡</a></p>
                </form>
            </div>
        </section>

        <!-- AUTH -->
        <section id="login" aria-labelledby="login-heading">
            <div class="auth-container" style="max-width:500px;margin:20px auto;">
                <div style="display:flex; border-bottom:1px solid #333; margin-bottom:20px;">
                    <div onclick="switchAuth('login')" id="tab-login" style="flex:1; padding:15px; text-align:center; cursor:pointer; color:var(--green); border-bottom:2px solid var(--green);">Ø¯Ø®ÙˆÙ„</div>
                    <div onclick="switchAuth('register')" id="tab-register" style="flex:1; padding:15px; text-align:center; cursor:pointer; color:#666;">Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</div>
                </div>

                <div id="login-form">
                    <h2 style="text-align:center;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ ğŸ‘‹</h2>
                    <input type="tel" id="l_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" aria-label="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
                    <input type="password" id="l_pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" aria-label="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    <button class="submit-btn" onclick="loginUser()" aria-label="Ø¯Ø®ÙˆÙ„">Ø¯Ø®ÙˆÙ„</button>
                </div>

                <div id="register-form" style="display:none;">
                    <h2 style="text-align:center;">Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ ğŸš€</h2>
                    <input type="text" id="r_name" placeholder="Ø§Ù„Ø§Ø³Ù…" aria-label="Ø§Ù„Ø§Ø³Ù…">
                    <input type="tel" id="r_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" aria-label="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
                    <input type="password" id="r_pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" aria-label="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    <button class="submit-btn" onclick="registerUser()" aria-label="Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
                </div>
                <div id="authMsg" style="text-align:center; margin-top:15px; font-size:0.9rem;"></div>
            </div>
        </section>

        <!-- PROFILE -->
        <section id="profile" aria-labelledby="profile-heading">
            <div class="profile-container" style="max-width:800px; margin:20px auto;">
                <div style="text-align:center; margin-bottom:30px;"><i class="fas fa-user-circle" style="font-size:4rem; color:var(--green);"></i><h2 id="prof_disp_name">Ù…Ø±Ø­Ø¨Ø§Ù‹</h2></div>
                <div class="form-container">
                    <h3 style="color:var(--green);">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø­Ù†</h3>
                    <input type="text" id="prof_name" placeholder="Ø§Ù„Ø§Ø³Ù…" aria-label="Ø§Ù„Ø§Ø³Ù…">
                    <input type="tel" id="prof_phone" placeholder="Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" readonly style="background:#222;" aria-label="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
                    <input type="tel" id="prof_phone2" placeholder="Ø±Ù‚Ù… Ø§Ø­ØªÙŠØ§Ø·ÙŠ" aria-label="Ø±Ù‚Ù… Ø§Ø­ØªÙŠØ§Ø·ÙŠ">
                    <input type="text" id="prof_addr" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" aria-label="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
                    <button class="submit-btn" onclick="saveProfile()" aria-label="Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
                </div>
                <div style="text-align:center; margin-top:20px;">
                    <h3 style="color:#fff;">Ø§Ù„Ù…ÙØ¶Ù„Ø© â¤ï¸</h3>
                    <div id="savedList" style="text-align:center; color:#666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ±</div>
                </div>
                <button onclick="logout()" style="margin-top:30px; background:#333; color:var(--error); width:100%; border:none; padding:15px; border-radius:5px; font-weight:bold; cursor:pointer;" aria-label="ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
            </div>
        </section>

        <!-- STATIC PAGES -->
        <section id="about"><div class="form-container" style="text-align:center;"><h1>TRINEX VISION</h1><p style="color:#ccc; line-height:1.8;">Ù†Ø­Ù† Ù†ØºÙŠØ± Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ù€ Streetwear ÙÙŠ Ù…ØµØ±.<br>Ø¬ÙˆØ¯Ø©ØŒ Ù‡ÙˆÙŠØ©ØŒ ÙˆÙ…Ø³ØªÙ‚Ø¨Ù„.</p><br>EST. 2025 // CAIRO</div></section>
        <section id="winter"><h1 style="text-align:center; margin-top:100px;">Winter Collection â„ï¸<br><span style="font-size:1rem; color:var(--muted);">Coming Soon</span></h1></section>
        <section id="summer"><h1 style="text-align:center; margin-top:100px;">Summer Vibes â˜€ï¸<br><span style="font-size:1rem; color:var(--muted);">Coming Soon</span></h1></section>
        <section id="sweatpants"><h1 style="text-align:center; margin-top:100px;">Pants Collection ğŸ‘–<br><span style="font-size:1rem; color:var(--muted);">Coming Soon</span></h1></section>
    </main>

    <footer>
        <div class="social-icons">
            <a href="#" class="facebook" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="instagram" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" class="tiktok" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
            <a href="#" class="telegram" aria-label="Telegram"><i class="fab fa-telegram-plane"></i></a>
        </div>
        <p style="color:#666; margin-top:15px; font-size:0.8rem;">&copy; 2025 TRINEX. All Rights Reserved.</p>
    </footer>

    <a href="https://wa.me/201114519866" class="whatsapp-float" target="_blank" rel="noopener noreferrer" aria-label="ÙˆØ§ØªØ³Ø§Ø¨"><i class="fab fa-whatsapp"></i></a>

    <!-- ========== Firebase imports (module) ==========
         Ù…Ù„Ø§Ø­Ø¸Ø©: Ù…ÙØ§ØªÙŠØ­ firebase ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ÙˆØ§Ø¬Ù‡ÙˆÙŠ Ø·Ø¨ÙŠØ¹ÙŠØ© Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙˆÙŠØ¨ØŒ
         Ù„ÙƒÙ† ÙŠØ¬Ø¨ Ø¶Ø¨Ø· Ù‚ÙˆØ§Ø¹Ø¯ Firestore/Storage Ù„ØªÙ…Ù†Ø¹ Ø§Ù„ÙˆØµÙˆÙ„ ØºÙŠØ± Ø§Ù„Ù…ØµØ±Ø­.
         Ø§Ù„Ø¨Ø¯ÙŠÙ„ Ø§Ù„Ø£ÙØ¶Ù„: Ø§Ø³ØªØ®Ø¯Ù… Firebase Authentication Ø£Ùˆ ÙˆØ§Ø¬Ù‡Ø© Backend Ù„ØªØ£Ù…ÙŠÙ† Ø§Ù„ØªØ³Ø¬ÙŠÙ„.
    -->
    <script type="module">
        // ===== Firebase Initialization (modular) =====
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, query, where, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // ====== Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ù…Ø§Ù† ======
        // 1) Ù‡Ø°Ø§ config Ø¸Ø§Ù‡Ø± ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ù„Ø£Ù† Firebase Web SDK ÙŠØªØ·Ù„Ø¨Ù‡.
        // 2) ØªØ£ÙƒØ¯ Ù…Ù† Ù‚ÙˆØ§Ø¹Ø¯ Firestore ÙÙŠ Console Ø­ØªÙ‰ Ù„Ø§ ØªØµØ¨Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø§Ù…Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©/Ø§Ù„ÙƒØªØ§Ø¨Ø©.
        // 3) Ø§Ù„Ø£ÙØ¶Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase Auth + Server-side functions Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø©.
        const firebaseConfig = {
            apiKey: "AIzaSyDpC3kyBhy-mWsYjVAHxUuy2pqg_Sh0Z8U",
            authDomain: "trinex-store.firebaseapp.com",
            projectId: "trinex-store",
            storageBucket: "trinex-store.firebasestorage.app",
            messagingSenderId: "265387866506",
            appId: "1:265387866506:web:1fb7786e186cf0abf43073"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ======= HELPER: hash ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (SHA-256) Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ========
        async function hashStringSHA256(text) {
            const enc = new TextEncoder();
            const data = enc.encode(text);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        // ======= Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ù„Ø§ ÙŠØ®Ø²Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù†ØµÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¢Ù†) =======
        window.registerUser = async function() {
            let name = document.getElementById('r_name').value.trim();
            let phone = document.getElementById('r_phone').value.trim();
            let pass = document.getElementById('r_pass').value;
            if(phone.length < 11 || pass.length < 4) { alert("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©"); return; }

            try {
                // ØªØ­Ù‚Ù‚ Ø¥Ù† Ø§Ù„Ø±Ù‚Ù… Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§
                const q = query(collection(db, "customers"), where("phone", "==", phone));
                const snap = await getDocs(q);
                if(!snap.empty) { alert("Ø§Ù„Ø±Ù‚Ù… Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹"); return; }

                // ØªØ¬Ø²Ø¦Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸
                const passHash = await hashStringSHA256(pass);

                // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø¯ÙˆÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙƒÙ†Øµ ØµØ±ÙŠØ­
                await addDoc(collection(db, "customers"), { name, phone, passwordHash: passHash, createdAt: serverTimestamp() });

                // Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø­Ù„ÙŠÙ‹Ø§ (Ù„Ø§ Ù†Ø®Ø²Ù† Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯)
                loginSuccess(name, phone);
            } catch(e) {
                console.error(e);
                alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„");
            }
        }

        // ======= ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ù…Ù‚Ø§Ø±Ù†Ø© Ù…Ø¹ Ø§Ù„Ù€ hash) =======
        window.loginUser = async function() {
            let phone = document.getElementById('l_phone').value.trim();
            let pass = document.getElementById('l_pass').value;
            if(!phone || !pass) { alert("Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"); return; }

            try {
                const passHash = await hashStringSHA256(pass);
                const q = query(collection(db, "customers"), where("phone", "==", phone), where("passwordHash", "==", passHash));
                const snap = await getDocs(q);
                if(snap.empty) {
                    alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
                } else {
                    let name = "Ø§Ù„Ø¹Ù…ÙŠÙ„";
                    snap.forEach(d => { name = d.data().name || name; });
                    loginSuccess(name, phone);
                }
            } catch(e) {
                console.error(e);
                alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„");
            }
        }
    </script>

    <!-- ========== App logic (UI + Cart + rendering) ========== -->
    <script>
        // ===== 1) Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª =====
        const productsDB = {
            'p1': { name: "Black Hoodie V1", price: 650, img: "hode1.jpg", colors: ["Black", "White"], sizes: ["M","L","XL"], description: "Ù‡ÙˆØ¯ÙŠ Ù‚Ø·Ù† 100%ØŒ Ø®Ø§Ù…Ø© Ù…Ø±ÙŠØ­Ø© ÙˆÙ…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø§Ø³ØªØ±Øª ÙˆÙŠØ±." },
            'p2': { name: "Oversized Tee", price: 400, img: "hode2.jpg", colors: ["Black","Gray"], sizes: ["M","L","XL","XXL"], description: "ØªÙŠØ´ÙŠØ±Øª Oversized Ø¨Ù‚ØµØ© Ø¹ØµØ±ÙŠØ© ÙˆØ®Ø§Ù…Ø© Ù†Ø§Ø¹Ù…Ø©." },
            'p3': { name: "Tactical Vest", price: 850, img: "hode3.jpg", colors: ["Black","Olive"], sizes: ["L","XL","OneSize"], description: "Ø³ØªØ±Ø© ØªÙƒØªÙŠÙƒÙŠØ© Ù…Ø¹ Ø¬ÙŠÙˆØ¨ Ù…ØªØ¹Ø¯Ø¯Ø©." }
        };
        let currentProduct = {};
        let selectedColor = "";

        // ===== 2) Navigation =====
        function showSection(id) {
            document.querySelectorAll('main section').forEach(s => s.classList.remove('active'));
            const el = document.getElementById(id);
            if(el) el.classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // triggers
            if(id === 'cart') renderCart();
            if(id === 'checkout') loadCheckout();
            if(id === 'profile') loadProfile();
        }

        // ===== 3) Open product & render details =====
        function openProduct(id) {
            const p = productsDB[id];
            if(!p) return;
            currentProduct = { ...p, id };
            selectedColor = "";

            // Fill Data
            const pImg = document.getElementById('p_img');
            pImg.src = p.img;
            pImg.alt = p.name + " - TRINEX";
            document.getElementById('p_title').innerText = p.name;
            document.getElementById('p_price').innerText = p.price + " EGP";

            // Description (for SEO / users)
            // Add description below title if needed (not to break layout)
            if(!document.getElementById('p_desc')) {
                const descEl = document.createElement('p');
                descEl.id = 'p_desc';
                descEl.style.color = '#bbb';
                descEl.style.marginTop = '10px';
                document.querySelector('.view-details').insertBefore(descEl, document.getElementById('p_size'));
            }
            document.getElementById('p_desc').innerText = p.description || '';

            // Colors
            const colorHTML = p.colors.map(c => {
                const bg = (c.toLowerCase() === 'olive' ? 'darkgreen' : c);
                return `<div role="button" tabindex="0" aria-label="Ø§Ø®ØªØ§Ø± Ø§Ù„Ù„ÙˆÙ† ${c}" class="color-dot" style="background:${bg};" onclick="selectColor('${c}', this)"></div>`;
            }).join('');
            document.getElementById('p_colors').innerHTML = colorHTML;
            document.getElementById('color-txt').innerText = "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±";

            // Sizes
            const sizeHTML = p.sizes.map(s => `<option value="${s}">${s}</option>`).join('');
            document.getElementById('p_size').innerHTML = sizeHTML;

            document.getElementById('review-panel').style.display = 'none';
            showSection('product-view');
        }

        function selectColor(color, el) {
            selectedColor = color;
            document.getElementById('color-txt').innerText = "ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: " + color;
            document.querySelectorAll('.color-dot').forEach(d => d.classList.remove('active'));
            el.classList.add('active');
        }

        // Smooth open review
        function openReview() {
            if(!selectedColor) { alert("Ø§Ø®ØªØ± Ù„ÙˆÙ†Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹!"); return; }
            document.getElementById('rev-color').innerText = selectedColor;
            document.getElementById('rev-size').innerText = document.getElementById('p_size').value;
            document.getElementById('rev-qty').innerText = document.getElementById('p_qty').value;
            const panel = document.getElementById('review-panel');
            panel.style.display = 'block';
            panel.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function confirmAddToCart() {
            const item = {
                id: currentProduct.id,
                product: currentProduct.name,
                price: currentProduct.price,
                img: currentProduct.img,
                color: selectedColor,
                size: document.getElementById('p_size').value,
                qty: parseInt(document.getElementById('p_qty').value, 10)
            };
            const cart = JSON.parse(localStorage.getItem('trinex_cart')) || [];
            cart.push(item);
            localStorage.setItem('trinex_cart', JSON.stringify(cart));
            if(confirm("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©! Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ø³Ù„Ø©ØŸ")) showSection('cart');
        }

        // ===== 4) Cart =====
        function renderCart() {
            const cart = JSON.parse(localStorage.getItem('trinex_cart')) || [];
            const container = document.getElementById('cartItems');
            let total = 0;
            if(cart.length === 0) {
                container.innerHTML = "<p style='text-align:center; color:#666;'>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>";
                document.getElementById('cartSummary').style.display = 'none';
                return;
            }
            document.getElementById('cartSummary').style.display = 'block';
            container.innerHTML = cart.map((item, idx) => {
                total += (Number(item.price) * Number(item.qty));
                return `<div class="cart-item" role="listitem"><img src="${item.img}" alt="${item.product}" loading="lazy"><div><h4>${item.product}</h4><p style="color:#bbb;">${item.color} | ${item.size} | x${item.qty}</p></div><button class="remove-btn" onclick="delCartItem(${idx})" aria-label="Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±"><i class="fas fa-trash"></i></button></div>`;
            }).join('');
            document.getElementById('cartTotal').innerText = total;
        }

        function delCartItem(idx) {
            const cart = JSON.parse(localStorage.getItem('trinex_cart')) || [];
            cart.splice(idx, 1);
            localStorage.setItem('trinex_cart', JSON.stringify(cart));
            renderCart();
        }

        // ===== 5) Checkout =====
        function loadCheckout() {
            const saved = JSON.parse(localStorage.getItem('trinex_saved_info'));
            if(saved) {
                document.getElementById('co_name').value = saved.name || "";
                document.getElementById('co_phone').value = saved.phone || "";
                document.getElementById('co_phone2').value = saved.phone2 || "";
                document.getElementById('co_address').value = saved.address || "";
                document.getElementById('autoFillMsg').style.display = 'block';
            }
        }

        function sendOrder(e) {
            e.preventDefault();
            const cart = JSON.parse(localStorage.getItem('trinex_cart')) || [];
            if(cart.length === 0) { alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!"); return; }

            const name = document.getElementById('co_name').value;
            const phone = document.getElementById('co_phone').value;
            const addr = document.getElementById('co_address').value;
            const itemsText = cart.map(i => `â–ªï¸ ${i.product} (${i.color}, ${i.size}, x${i.qty})`).join('%0a');
            const total = document.getElementById('cartTotal').innerText;

            const msg = `ğŸ›’ *Ø£ÙˆØ±Ø¯Ø± Ø¬Ø¯ÙŠØ¯*%0a----------%0a${itemsText}%0a----------%0ağŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} EGP%0ağŸ‘¤ ${name}%0ağŸ“± ${phone}%0ağŸ  ${addr}`;
            // ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø© Ù…Ø­Ù„ÙŠØ§Ù‹
            localStorage.removeItem('trinex_cart');
            // Ø§ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ù„Ø¨
            window.open(`https://wa.me/201114519866?text=${msg}`, '_blank', 'noopener');
            showSection('home');
        }

        // ===== 6) AUTH & PROFILE (localStorage + improved hashing handled in module) =====
        function switchAuth(type) {
            document.getElementById('login-form').style.display = type === 'login' ? 'block' : 'none';
            document.getElementById('register-form').style.display = type === 'register' ? 'block' : 'none';
            document.getElementById('tab-login').style.borderBottom = type === 'login' ? '2px solid var(--green)' : 'none';
            document.getElementById('tab-login').style.color = type === 'login' ? 'var(--green)' : '#666';
            document.getElementById('tab-register').style.borderBottom = type === 'register' ? '2px solid var(--green)' : 'none';
            document.getElementById('tab-register').style.color = type === 'register' ? 'var(--green)' : '#666';
        }

        function loginSuccess(name, phone) {
            localStorage.setItem('trinex_user_logged', 'true');
            localStorage.setItem('trinex_user_name', name);
            localStorage.setItem('trinex_user_phone', phone);
            checkLogin();
            showSection('home');
        }

        function checkLogin() {
            if(localStorage.getItem('trinex_user_logged')) {
                document.getElementById('loginBtn').style.display = 'none';
                document.getElementById('userProfile').style.display = 'flex';
                document.getElementById('userNameTxt').innerText = localStorage.getItem('trinex_user_name') || 'Ø§Ù„Ø¹Ù…ÙŠÙ„';
            } else {
                document.getElementById('loginBtn').style.display = 'block';
                document.getElementById('userProfile').style.display = 'none';
            }
        }

        function saveProfile() {
            const info = {
                name: document.getElementById('prof_name').value,
                phone: document.getElementById('prof_phone').value,
                phone2: document.getElementById('prof_phone2').value,
                address: document.getElementById('prof_addr').value
            };
            localStorage.setItem('trinex_saved_info', JSON.stringify(info));
            localStorage.setItem('trinex_user_name', info.name || '');
            alert("ØªÙ… Ø§Ù„Ø­ÙØ¸!");
            checkLogin();
        }

        function loadProfile() {
            const phone = localStorage.getItem('trinex_user_phone');
            if(!phone) { showSection('login'); return; }
            document.getElementById('prof_disp_name').innerText = localStorage.getItem('trinex_user_name') || 'Ù…Ø±Ø­Ø¨Ø§Ù‹';
            document.getElementById('prof_phone').value = phone;

            const saved = JSON.parse(localStorage.getItem('trinex_saved_info'));
            if(saved) {
                document.getElementById('prof_name').value = saved.name || "";
                document.getElementById('prof_phone2').value = saved.phone2 || "";
                document.getElementById('prof_addr').value = saved.address || "";
            }

            // Render Likes
            const likes = JSON.parse(localStorage.getItem('trinex_likes')) || [];
            const list = document.getElementById('savedList');
            if(likes.length > 0) {
                list.innerHTML = likes.map(id => {
                    const p = productsDB[id];
                    return `<div class="cart-item" role="listitem"><img src="${p.img}" alt="${p.name}" loading="lazy"><div><h4>${p.name}</h4></div></div>`;
                }).join('');
            } else { list.innerHTML = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ±"; }
        }

        function logout() {
            if(confirm("Ø®Ø±ÙˆØ¬ØŸ")) {
                // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ù†Ø§ Ù†Ù…Ø³Ø­ localStorage ÙÙ‚Ø·ØŒ Ù„Ø§ Ù†ØºÙ„Ù‚ Ø§Ù„Ø¬Ù„Ø³Ø© ÙÙŠ Firebase Ù„Ø£Ù† Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ØªØªÙ… Ø§Ù„Ø¢Ù† Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø³Ø·Ø©.
                localStorage.clear();
                location.reload();
            }
        }

        // ===== 7) Like/Save interaction (ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹) =====
        function toggleAction(btn, type) {
            if(!localStorage.getItem('trinex_user_logged')) { alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£ÙˆÙ„!"); showSection('login'); return; }
            const card = btn.closest('.card');
            const id = card.dataset.id;
            const key = type === 'like' ? 'trinex_likes' : 'trinex_saved';
            let list = JSON.parse(localStorage.getItem(key)) || [];

            if(list.includes(id)) {
                list = list.filter(i => i !== id);
                btn.classList.remove(type === 'like' ? 'liked' : 'saved');
                btn.querySelector('i').classList.replace('fas','far');
            } else {
                list.push(id);
                btn.classList.add(type === 'like' ? 'liked' : 'saved');
                btn.querySelector('i').classList.replace('far','fas');
            }
            localStorage.setItem(key, JSON.stringify(list));
        }

        // ===== 8) Smart Navbar hide on scroll =====
        let lastScrollTop = 0;
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', function() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (scrollTop > lastScrollTop && scrollTop > 100) {
                navbar.classList.add('nav-hidden');
            } else {
                navbar.classList.remove('nav-hidden');
            }
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
        });

        // ===== Init =====
        window.onload = function() {
            checkLogin();
            // ensure product grid images have alt text already set above
        };
    </script>

    <!-- JSON-LD Structured Data (Ø³Ø§Ø¹Ø¯ Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø« Ø¹Ù„Ù‰ ÙÙ‡Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Store",
      "name": "TRINEX",
      "url": "https://trinex-store.vercel.app/",
      "description": "Ù…ØªØ¬Ø± Ø³ØªØ±ÙŠØª ÙˆÙŠØ± Ù…ØµØ±ÙŠ â€” Ø¬ÙˆØ¯Ø©ØŒ Ù‡ÙˆÙŠØ©ØŒ ÙˆÙ…Ø³ØªÙ‚Ø¨Ù„.",
      "logo": "https://trinex-store.vercel.app/favicon.png",
      "sameAs": []
    }
    </script>

    <!-- NoScript message -->
    <noscript><div style="background:#222; color:#fff; padding:12px; text-align:center;">ÙŠØ¬Ø¨ ØªÙØ¹ÙŠÙ„ JavaScript Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØ¬Ø± Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.</div></noscript>
</body>
</html>

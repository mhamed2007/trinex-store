<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRINEX | ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;700&family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --bg-color: #000000; --text-color: #ffffff; --green-btn: #00e676; --error: #ff3333; }
        body { font-family: 'Cairo', sans-serif; background-color: var(--bg-color); color: var(--text-color); margin: 0; padding: 0; padding-top: 20px; }
        
        .container { max-width: 600px; margin: 20px auto; background: #111; padding: 30px; border-radius: 10px; border: 1px solid #333; }
        h1 { text-align: center; color: var(--green-btn); margin-bottom: 20px; font-family: 'Montserrat'; text-transform: uppercase; }
        
        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© */
        .auto-fill-badge { background: rgba(0, 230, 118, 0.1); color: var(--green-btn); padding: 10px; border-radius: 5px; text-align: center; font-size: 0.9rem; margin-bottom: 20px; display: none; border: 1px dashed var(--green-btn); }

        .form-group { margin-bottom: 20px; text-align: right; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #ccc; }
        input, textarea { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; border-radius: 5px; font-family: 'Cairo'; font-size: 1rem; box-sizing: border-box; }
        input:focus, textarea:focus { border-color: var(--green-btn); outline: none; }
        
        .submit-btn { width: 100%; padding: 15px; background: var(--green-btn); color: #000; border: none; font-weight: bold; font-size: 1.1rem; border-radius: 5px; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        .submit-btn:hover { background: #fff; }

        .order-summary { background: #1a1a1a; padding: 15px; border-radius: 5px; margin-bottom: 30px; border-right: 3px solid var(--green-btn); }
        .order-summary h3 { margin: 0 0 10px 0; font-size: 1rem; color: #888; }
        .order-summary p { margin: 5px 0; font-weight: bold; }
        
        .back-link { display: block; text-align: center; margin-top: 15px; color: #888; text-decoration: none; }
    </style>
</head>
<body>

    <div class="container">
        <h1>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ğŸ›’</h1>
        
        <div class="order-summary">
            <h3>Ù…Ù„Ø®Øµ Ø·Ù„Ø¨Ùƒ:</h3>
            <p id="summ-product">Ø§Ù„Ù…Ù†ØªØ¬: Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
            <p id="summ-details">Ø§Ù„ØªÙØ§ØµÙŠÙ„: ...</p>
        </div>

        <div id="autoMsg" class="auto-fill-badge">âœ¨ ØªÙ… Ù…Ù„Ø¡ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</div>

        <form id="checkoutForm" onsubmit="return validateAndSend(event)">
            
            <div class="form-group">
                <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</label>
                <input type="text" id="fullName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„" required>
            </div>

            <div class="form-group">
                <label>Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</label>
                <input type="tel" id="phone1" placeholder="01xxxxxxxxx" required pattern="[0-9]{11}">
            </div>

            <div class="form-group">
                <label>Ø±Ù‚Ù… ØªÙ„ÙŠÙÙˆÙ† Ø§Ø­ØªÙŠØ§Ø·ÙŠ</label>
                <input type="tel" id="phone2" placeholder="Ø±Ù‚Ù… Ø¢Ø®Ø± Ù…Ø®ØªÙ„Ù" required pattern="[0-9]{11}">
            </div>

            <div class="form-group">
                <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„</label>
                <textarea id="address" rows="3" placeholder="Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© - Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø§Ù„Ø´Ø§Ø±Ø¹ - Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø²Ù„" required></textarea>
            </div>

            <button type="submit" class="submit-btn">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ âœ…</button>
            <a href="index.html" class="back-link">Ø¥Ù„ØºØ§Ø¡ ÙˆØ¹ÙˆØ¯Ø©</a>
        </form>
    </div>

    <script>
        // 1. Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„: Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ù†ØªØ¬ + Ø§Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        window.onload = function() {
            // Ø£. Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬
            let productData = JSON.parse(localStorage.getItem('trinexOrder')) || {};
            if(productData.product) {
                document.getElementById('summ-product').innerText = "Ø§Ù„Ù…Ù†ØªØ¬: " + productData.product;
                document.getElementById('summ-details').innerText = `Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª: ${productData.color} | Ù…Ù‚Ø§Ø³ ${productData.size} | Ø¹Ø¯Ø¯ ${productData.qty}`;
            }

            // Ø¨. Ø§Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© (Auto-Fill)
            let savedInfo = JSON.parse(localStorage.getItem('trinex_saved_info'));
            if(savedInfo) {
                document.getElementById('fullName').value = savedInfo.name || "";
                document.getElementById('phone1').value = savedInfo.phone || "";
                document.getElementById('phone2').value = savedInfo.phone2 || "";
                // Ø¯Ù…Ø¬ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ù…Ø¹ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
                let fullAddress = (savedInfo.city ? savedInfo.city + " - " : "") + (savedInfo.address || "");
                document.getElementById('address').value = fullAddress;

                // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
                document.getElementById('autoMsg').style.display = 'block';
            }
        };

        // 2. Ø§Ù„ÙØ­Øµ ÙˆØ§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨
        function validateAndSend(e) {
            e.preventDefault();

            let name = document.getElementById('fullName').value;
            let p1 = document.getElementById('phone1').value;
            let p2 = document.getElementById('phone2').value;
            let addr = document.getElementById('address').value;
            let productData = JSON.parse(localStorage.getItem('trinexOrder')) || {};

            if (p1 === p2) { alert("Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ø®ØªÙ„ÙØ§Ù‹!"); return; }

            // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            let myNumber = "201114519866"; 
            let message = `ğŸ›’ *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹*%0a` +
                          `-----------------------%0a` +
                          `ğŸ“¦ *Ø§Ù„Ù…Ù†ØªØ¬:* ${productData.product}%0a` +
                          `ğŸ¨ *Ø§Ù„Ù„ÙˆÙ†:* ${productData.color}%0a` +
                          `ğŸ“ *Ø§Ù„Ù…Ù‚Ø§Ø³:* ${productData.size}%0a` +
                          `ğŸ”¢ *Ø§Ù„Ø¹Ø¯Ø¯:* ${productData.qty}%0a` +
                          `-----------------------%0a` +
                          `ğŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${name}%0a` +
                          `ğŸ“± *Ù…ÙˆØ¨Ø§ÙŠÙ„ 1:* ${p1}%0a` +
                          `ğŸ“ *Ù…ÙˆØ¨Ø§ÙŠÙ„ 2:* ${p2}%0a` +
                          `ğŸ  *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${addr}`;

            // ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨
            window.open(`https://wa.me/${myNumber}?text=${message}`, '_blank');
        }
    </script>

</body>
</html>